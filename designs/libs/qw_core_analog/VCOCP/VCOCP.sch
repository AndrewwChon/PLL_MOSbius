v {xschem version=3.4.7 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
N 460 -260 560 -260 {lab=#net1}
N 600 -230 600 -200 {lab=vss}
N 600 -200 960 -200 {lab=vss}
N 960 -230 960 -200 {lab=vss}
N 780 -230 780 -200 {lab=vss}
N 780 -260 790 -260 {lab=vss}
N 790 -260 790 -200 {lab=vss}
N 600 -260 610 -260 {lab=vss}
N 610 -260 610 -200 {lab=vss}
N 960 -260 970 -260 {lab=vss}
N 970 -260 970 -200 {lab=vss}
N 960 -200 970 -200 {lab=vss}
N 600 -350 600 -290 {lab=#net2}
N 780 -350 780 -290 {lab=#net3}
N 600 -380 610 -380 {lab=vss}
N 780 -380 790 -380 {lab=vss}
N 960 -350 970 -350 {lab=vss}
N 540 -300 540 -260 {lab=#net1}
N 540 -300 900 -300 {lab=#net1}
N 900 -300 900 -260 {lab=#net1}
N 900 -260 920 -260 {lab=#net1}
N 720 -260 740 -260 {lab=#net1}
N 720 -300 720 -260 {lab=#net1}
N 780 -490 780 -410 {lab=#net4}
N 820 -640 920 -640 {lab=#net4}
N 760 -640 780 -640 {lab=vdd}
N 760 -700 760 -640 {lab=vdd}
N 760 -700 980 -700 {lab=vdd}
N 980 -700 980 -640 {lab=vdd}
N 960 -640 980 -640 {lab=vdd}
N 960 -700 960 -670 {lab=vdd}
N 780 -700 780 -670 {lab=vdd}
N 770 -550 780 -550 {lab=vdd}
N 960 -550 970 -550 {lab=vdd}
N 860 -640 860 -480 {lab=#net4}
N 780 -480 860 -480 {lab=#net4}
N 600 -490 600 -410 {lab=vmir}
N 600 -700 600 -550 {lab=vdd}
N 600 -700 760 -700 {lab=vdd}
N 560 -420 560 -380 {lab=vb1}
N 740 -420 740 -380 {lab=vb1}
N 300 -280 340 -280 {lab=vmir}
N 300 -460 300 -280 {lab=vmir}
N 300 -460 600 -460 {lab=vmir}
N 340 -340 340 -320 {lab=vdd}
N 340 -200 340 -180 {lab=vss}
N 300 -240 340 -240 {lab=vin}
N 1090 -200 1230 -200 {lab=vss}
N 1230 -260 1230 -200 {lab=vss}
N 1220 -260 1230 -260 {lab=vss}
N 1220 -230 1220 -200 {lab=vss}
N 900 -300 1040 -300 {lab=#net1}
N 1160 -300 1180 -300 {lab=#net1}
N 1220 -610 1220 -290 {lab=vb2}
N 1220 -700 1220 -670 {lab=vdd}
N 1100 -700 1220 -700 {lab=vdd}
N 1220 -640 1240 -640 {lab=vdd}
N 1240 -700 1240 -640 {lab=vdd}
N 1160 -640 1180 -640 {lab=vb2}
N 1160 -640 1160 -580 {lab=vb2}
N 1160 -580 1220 -580 {lab=vb2}
N 980 -700 1100 -700 {lab=vdd}
N 1080 -700 1080 -670 {lab=vdd}
N 1060 -640 1080 -640 {lab=vdd}
N 1060 -700 1060 -640 {lab=vdd}
N 1080 -610 1080 -290 {lab=vb1}
N 970 -200 1090 -200 {lab=vss}
N 1080 -230 1080 -200 {lab=vss}
N 1080 -260 1090 -260 {lab=vss}
N 1090 -260 1090 -200 {lab=vss}
N 1040 -300 1160 -300 {lab=#net1}
N 1180 -300 1180 -260 {lab=#net1}
N 1020 -260 1040 -260 {lab=vb1}
N 1020 -320 1020 -260 {lab=vb1}
N 1020 -320 1080 -320 {lab=vb1}
N 960 -320 960 -290 {lab=#net5}
N 560 -420 740 -420 {lab=vb1}
N 960 -460 960 -440 {lab=out}
N 960 -450 1020 -450 {lab=out}
N 950 -490 960 -490 {lab=vdd}
N 950 -410 960 -410 {lab=vss}
N 780 -520 780 -490 {lab=#net4}
N 780 -610 780 -580 {lab=#net6}
N 820 -550 920 -550 {lab=vb2}
N 960 -610 960 -580 {lab=#net7}
N 740 -420 880 -420 {lab=vb1}
N 880 -420 880 -350 {lab=vb1}
N 880 -350 920 -350 {lab=vb1}
N 1000 -490 1020 -490 {lab=up}
N 1000 -410 1020 -410 {lab=down}
N 1320 -240 1320 -200 {lab=vss}
N 1230 -200 1320 -200 {lab=vss}
N 1020 -450 1320 -450 {lab=out}
N 1320 -450 1320 -300 {lab=out}
N 160 -620 160 -600 {lab=GND}
N 160 -710 160 -680 {lab=vdd}
N 220 -620 220 -600 {lab=GND}
N 220 -710 220 -680 {lab=vss}
N 280 -620 280 -600 {lab=GND}
N 280 -710 280 -680 {lab=vin}
N 340 -620 340 -600 {lab=GND}
N 340 -710 340 -680 {lab=up}
N 400 -620 400 -600 {lab=GND}
N 400 -710 400 -680 {lab=down}
N 480 -710 480 -680 {lab=iref}
N 480 -620 480 -600 {lab=GND}
N 400 -230 400 -200 {lab=iref}
N 490 -310 490 -260 {lab=#net1}
N 490 -460 490 -370 {lab=vmir}
N 1120 -640 1160 -640 {lab=vb2}
N 1220 -700 1240 -700 {lab=vdd}
C {libs/qw_core_analog/OTAforChargePump/OTAforChargePump.sym} 400 -260 0 0 {name=x1}
C {symbols/nfet_03v3.sym} 580 -260 0 0 {name=M5
L=0.5u
W=16u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 580 -380 0 0 {name=M1
L=0.5u
W=16u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 760 -260 0 0 {name=M2
L=0.5u
W=16u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 760 -380 0 0 {name=M3
L=0.5u
W=16u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 940 -260 0 0 {name=M4
L=0.5u
W=16u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 940 -350 0 0 {name=M6
L=0.5u
W=16u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {lab_wire.sym} 610 -380 0 1 {name=p1 sig_type=std_logic lab=vss}
C {lab_wire.sym} 790 -380 0 1 {name=p2 sig_type=std_logic lab=vss}
C {lab_wire.sym} 970 -350 0 1 {name=p3 sig_type=std_logic lab=vss}
C {lab_wire.sym} 640 -200 0 1 {name=p4 sig_type=std_logic lab=vss}
C {symbols/pfet_03v3.sym} 800 -550 0 1 {name=M7
L=0.5u
W=40u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 800 -640 0 1 {name=M8
L=0.5u
W=40u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 940 -550 0 0 {name=M9
L=0.5u
W=40u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 940 -640 0 0 {name=M10
L=0.5u
W=40u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {lab_wire.sym} 800 -700 0 1 {name=p5 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 970 -550 0 1 {name=p6 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 770 -550 0 0 {name=p7 sig_type=std_logic lab=vdd}
C {res.sym} 600 -520 0 0 {name=R1
value=23k
footprint=1206
device=resistor
m=1}
C {lab_wire.sym} 340 -190 2 0 {name=p8 sig_type=std_logic lab=vss}
C {lab_wire.sym} 340 -330 0 1 {name=p9 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 310 -240 0 0 {name=p10 sig_type=std_logic lab=vin}
C {lab_wire.sym} 880 -550 0 1 {name=p11 sig_type=std_logic lab=vb2}
C {lab_wire.sym} 660 -420 0 1 {name=p12 sig_type=std_logic lab=vb1}
C {symbols/nfet_03v3.sym} 1200 -260 0 0 {name=M11
L=0.5u
W=16u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1200 -640 0 0 {name=M12
L=0.5u
W=10u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {lab_wire.sym} 1200 -580 0 0 {name=p13 sig_type=std_logic lab=vb2}
C {symbols/pfet_03v3.sym} 1100 -640 0 1 {name=M13
L=0.5u
W=10u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 1060 -260 0 0 {name=M14
L=0.5u
W=4u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {lab_wire.sym} 1030 -320 0 1 {name=p14 sig_type=std_logic lab=vb1}
C {symbols/nfet_03v3.sym} 980 -410 0 1 {name=M15
L=0.28u
W=8u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 980 -490 0 1 {name=M16
L=0.28u
W=20u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {lab_wire.sym} 950 -410 0 0 {name=p15 sig_type=std_logic lab=vss}
C {lab_wire.sym} 950 -490 0 0 {name=p16 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 1010 -490 0 1 {name=p17 sig_type=std_logic lab=up}
C {lab_wire.sym} 1010 -410 0 1 {name=p18 sig_type=std_logic lab=down}
C {lab_wire.sym} 1000 -450 0 1 {name=p19 sig_type=std_logic lab=out}
C {res.sym} 1320 -270 0 0 {name=R2
value=1k
footprint=1206
device=resistor
m=1}
C {vsource.sym} 160 -650 0 0 {name=V1 value=3.3 savecurrent=false}
C {gnd.sym} 160 -600 0 0 {name=l1 lab=GND}
C {vsource.sym} 220 -650 0 0 {name=V2 value=0 savecurrent=false}
C {gnd.sym} 220 -600 0 0 {name=l2 lab=GND}
C {vsource.sym} 280 -650 0 0 {name=V3 value=1 savecurrent=false}
C {gnd.sym} 280 -600 0 0 {name=l3 lab=GND}
C {lab_wire.sym} 160 -700 0 1 {name=p20 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 220 -700 0 1 {name=p21 sig_type=std_logic lab=vss}
C {lab_wire.sym} 280 -700 0 1 {name=p22 sig_type=std_logic lab=vin}
C {devices/code_shown.sym} 1370 -1220 0 0 {name=Simulation only_toplevel=false value="
.control
save all

**OP
**show all > op.log
**show all

** Source settings
**alter @V5[PULSE] = [ 1.64 1.66 20n 0.1n 0.1n 19.98n 40n 0 ]
**alter @V4[PULSE] = [ 1.66 1.64 20n 0.1n 0.1n 19.98n 40n 0 ]
**alter @V3[PULSE] = [ 0 3.3 10n 0.1n 0.1n 9.98n 20n 0 ]
**alter @V4[PULSE] = [ 0 3.3 50u 0.1u 0.1u 49.8u 100u 0 ]
**alter @V3[PULSE] = [ 0 3.3 75u 0.1u 0.1u 49.8u 100u 0 ]

** Initial Conditions
**C1 up 0 1u IC = 0
**C2 down 0 10f IC = 0

** Simulation settings
**.tran 1n 50u UIC
tran 1p 10n

write VCOCP.raw
.endc
"}
C {vsource.sym} 340 -650 0 0 {name=V4 value=0 savecurrent=false}
C {gnd.sym} 340 -600 0 0 {name=l4 lab=GND}
C {lab_wire.sym} 340 -700 0 1 {name=p23 sig_type=std_logic lab=up}
C {vsource.sym} 400 -650 0 0 {name=V5 value=0 savecurrent=false}
C {gnd.sym} 400 -600 0 0 {name=l5 lab=GND}
C {lab_wire.sym} 400 -700 0 1 {name=p24 sig_type=std_logic lab=down}
C {lab_wire.sym} 460 -460 0 0 {name=p25 sig_type=std_logic lab=vmir}
C {isource.sym} 480 -650 0 0 {name=I0 value=200u}
C {lab_wire.sym} 480 -700 0 1 {name=p26 sig_type=std_logic lab=iref}
C {gnd.sym} 480 -600 0 0 {name=l6 lab=GND}
C {lab_wire.sym} 400 -210 2 0 {name=p27 sig_type=std_logic lab=iref}
C {symbols/cap_mim_2p0fF.sym} 490 -340 0 0 {name=C1
W=20e-6
L=25e-6
model=cap_mim_2f0fF
spiceprefix=X
m=1}
C {devices/code_shown.sym} 0 -180 0 0 {name=MODELS1 only_toplevel=true
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
.lib $::180MCU_MODELS/sm141064.ngspice cap_mim
.lib $::180MCU_MODELS/sm141064.ngspice res_typical
.lib $::180MCU_MODELS/sm141064.ngspice moscap_typical
.lib $::180MCU_MODELS/sm141064.ngspice mimcap_typical
* .lib $::180MCU_MODELS/sm141064.ngspice res_statistical
"}
