v {xschem version=3.4.7 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
P 4 1 1320 -470 {}
P 4 1 1970 -500 {}
T {0 1100 1000 is 200} 1060 -520 0 0 0.4 0.4 {}
T {1 1001 0000 is 400} 1070 -1220 0 0 0.4 0.4 {}
T {Overall division ratio: N*P + S (N=2 fixed)
For P=400, S=200 -> expect division ratio of 1000} 560 -440 0 0 0.4 0.4 {}
N 700 -680 700 -650 {lab=GND}
N 700 -760 700 -740 {lab=vssa}
N 700 -980 700 -850 {lab=vdda}
N 700 -980 940 -980 {lab=vdda}
N 700 -760 750 -760 {lab=vssa}
N 750 -960 750 -760 {lab=vssa}
N 750 -960 940 -960 {lab=vssa}
N 1820 -820 1870 -820 {lab=vssa}
N 1820 -800 1870 -800 {lab=vssa}
N 1820 -980 1860 -980 {lab=lock}
N 1820 -960 1860 -960 {lab=up}
N 1820 -940 1860 -940 {lab=down}
N 1820 -860 1860 -860 {lab=out}
N 920 -840 940 -840 {lab=vssa}
N 920 -840 920 -820 {lab=vssa}
N 920 -820 940 -820 {lab=vssa}
N 920 -820 920 -800 {lab=vssa}
N 920 -800 940 -800 {lab=vssa}
N 750 -760 750 -660 {lab=vssa}
N 750 -660 810 -660 {lab=vssa}
N 700 -790 700 -760 {lab=vssa}
N 1870 -820 1870 -800 {lab=vssa}
N 810 -680 810 -660 {lab=vssa}
N 810 -660 810 -630 {lab=vssa}
N 810 -630 910 -630 {lab=vssa}
N 910 -740 940 -740 {lab=biasn_cp}
N 920 -900 940 -900 {lab=vssa}
N 920 -880 940 -880 {lab=vssa}
N 920 -900 920 -880 {lab=vssa}
N 920 -940 940 -940 {lab=vssa}
N 920 -920 920 -900 {lab=vssa}
N 920 -920 940 -920 {lab=vssa}
N 920 -940 920 -920 {lab=vssa}
N 1260 -580 1260 -550 {lab=vssa}
N 1220 -580 1220 -550 {lab=vssa}
N 1240 -550 1260 -550 {lab=vssa}
N 1240 -580 1240 -550 {lab=vssa}
N 1220 -550 1240 -550 {lab=vssa}
N 1160 -580 1160 -550 {lab=vssa}
N 1160 -550 1180 -550 {lab=vssa}
N 1180 -580 1180 -550 {lab=vssa}
N 1100 -580 1100 -550 {lab=vssa}
N 1100 -550 1160 -550 {lab=vssa}
N 1180 -550 1220 -550 {lab=vssa}
N 1120 -580 1120 -530 {lab=vdda}
N 1120 -530 1140 -530 {lab=vdda}
N 1140 -580 1140 -530 {lab=vdda}
N 1140 -530 1200 -530 {lab=vdda}
N 1200 -580 1200 -530 {lab=vdda}
N 1260 -1180 1260 -1140 {lab=vssa}
N 1240 -1180 1260 -1180 {lab=vssa}
N 1140 -1180 1140 -1140 {lab=vssa}
N 1240 -1180 1240 -1140 {lab=vssa}
N 1220 -1180 1240 -1180 {lab=vssa}
N 1220 -1180 1220 -1140 {lab=vssa}
N 1200 -1180 1220 -1180 {lab=vssa}
N 1200 -1180 1200 -1140 {lab=vssa}
N 1160 -1180 1200 -1180 {lab=vssa}
N 1180 -1160 1180 -1140 {lab=vdda}
N 1120 -1160 1180 -1160 {lab=vdda}
N 1100 -1160 1100 -1140 {lab=vdda}
N 1070 -1160 1100 -1160 {lab=vdda}
N 1120 -1160 1120 -1140 {lab=vdda}
N 1100 -1160 1120 -1160 {lab=vdda}
N 1160 -1180 1160 -1140 {lab=vssa}
N 1140 -1180 1160 -1180 {lab=vssa}
N 1970 -780 1970 -730 {lab=vssa}
N 1970 -900 1970 -840 {lab=def}
N 1820 -900 1970 -900 {lab=def}
N 1300 -580 1300 -560 {lab=tune}
N 1820 -760 1870 -760 {lab=div_in}
N 1820 -740 1870 -740 {lab=div_out}
N 880 -860 940 -860 {lab=vdda}
N 1280 -1160 1280 -1140 {lab=#net1}
N 1300 -1160 1300 -1140 {lab=#net2}
N 1320 -1160 1320 -1140 {lab=#net3}
N 1340 -1160 1340 -1140 {lab=#net4}
N 1300 -560 1300 -480 {lab=tune}
N 1300 -480 1480 -480 {lab=tune}
N 1480 -540 1480 -480 {lab=tune}
N 1320 -540 1480 -540 {lab=tune}
N 1320 -580 1320 -540 {lab=tune}
N 1340 -480 1340 -460 {lab=tune}
N 1340 -400 1340 -390 {lab=#net5}
N 1340 -330 1340 -320 {lab=vssa}
N 1440 -480 1440 -420 {lab=tune}
N 1440 -360 1440 -320 {lab=vssa}
N 1340 -320 1440 -320 {lab=vssa}
N 1460 -580 1460 -560 {lab=vssa}
N 1460 -560 1620 -560 {lab=vssa}
N 1620 -580 1620 -560 {lab=vssa}
N 1600 -580 1600 -560 {lab=vssa}
N 1580 -580 1580 -560 {lab=vssa}
N 1560 -580 1560 -560 {lab=vssa}
N 1540 -580 1540 -560 {lab=vssa}
N 1520 -580 1520 -560 {lab=vssa}
N 1500 -580 1500 -560 {lab=vssa}
N 1480 -580 1480 -560 {lab=vssa}
N 1460 -1160 1460 -1140 {lab=vssa}
N 1460 -1160 1660 -1160 {lab=vssa}
N 1660 -1160 1660 -1140 {lab=vssa}
N 1640 -1160 1640 -1140 {lab=vssa}
N 1620 -1160 1620 -1140 {lab=vssa}
N 1600 -1160 1600 -1140 {lab=vssa}
N 1580 -1160 1580 -1140 {lab=vssa}
N 1560 -1160 1560 -1140 {lab=vssa}
N 1540 -1160 1540 -1140 {lab=vssa}
N 1520 -1160 1520 -1140 {lab=vssa}
N 1500 -1160 1500 -1140 {lab=vssa}
N 1480 -1160 1480 -1140 {lab=vssa}
N 910 -740 910 -690 {lab=biasn_cp}
N 860 -760 940 -760 {lab=reference}
N 810 -750 810 -740 {lab=#net6}
N 860 -810 860 -760 {lab=reference}
N 810 -810 860 -810 {lab=reference}
N 1680 -580 1680 -560 {lab=vssa}
N 1700 -580 1700 -560 {lab=vssa}
N 1720 -580 1720 -560 {lab=vssa}
N 1740 -580 1740 -560 {lab=vssa}
N 1680 -560 1740 -560 {lab=vssa}
C {netlist.sym} 242.5 -1022.5 0 0 {name=s1 value="
.param VDD = 3.3
* control is for tests when opening the loop
* see the Vcontrol voltage source
.param vtune = 1.65
* charge pump reference
.param Iref_cp = 100u
* reference frequency
.param f_ref = 100e3
* divider
.param divide_factor = 1000
* loop filter parameters
.param Ci_filter = 1n
.param Rz_filter = 10k
.param Cj_filter = 50p
"}
C {lab_wire.sym} 920 -760 0 0 {name=p4 sig_type=std_logic lab=reference}
C {devices/vsource.sym} 700 -710 0 0 {name=Vssa value=0 savecurrent=false}
C {devices/gnd.sym} 700 -650 0 0 {name=l4 lab=GND}
C {devices/vsource.sym} 700 -820 0 0 {name=Vdda value="PWL (0 0 1n 0 10n \{VDD\})" savecurrent=false}
C {devices/lab_wire.sym} 700 -760 0 0 {name=p7 sig_type=std_logic lab=vssa}
C {devices/lab_wire.sym} 700 -880 0 0 {name=p8 sig_type=std_logic lab=vdda}
C {lab_wire.sym} 1860 -940 0 0 {name=p1 sig_type=std_logic lab=down
}
C {lab_wire.sym} 1860 -960 0 0 {name=p2 sig_type=std_logic lab=up
}
C {lab_wire.sym} 1860 -980 0 0 {name=p3 sig_type=std_logic lab=lock

}
C {lab_wire.sym} 1860 -860 0 0 {name=p5 sig_type=std_logic lab=out
}
C {lab_wire.sym} 1870 -820 0 0 {name=p6 sig_type=std_logic lab=vssa
}
C {lab_wire.sym} 920 -830 0 0 {name=p9 sig_type=std_logic lab=vssa}
C {lab_wire.sym} 920 -860 0 0 {name=p10 sig_type=std_logic lab=vdda}
C {lab_wire.sym} 1400 -540 0 0 {name=p11 sig_type=std_logic lab=tune}
C {isource.sym} 910 -660 0 0 {name=I0 value=\{Iref_cp\}}
C {lab_wire.sym} 1100 -550 0 0 {name=p13 sig_type=std_logic lab=vssa}
C {lab_wire.sym} 1120 -530 0 0 {name=p14 sig_type=std_logic lab=vdda}
C {lab_wire.sym} 1070 -1160 0 0 {name=p15 sig_type=std_logic lab=vdda}
C {lab_wire.sym} 1140 -1180 0 0 {name=p16 sig_type=std_logic lab=vssa}
C {devices/vsource.sym} 1970 -810 0 0 {name=V4
value="PWL(0 \{VDD\} 10n \{VDD\} 20n 0 1 0)"
savecurrent=false}
C {devices/lab_wire.sym} 1970 -750 0 0 {name=p23 sig_type=std_logic lab=vssa}
C {devices/lab_wire.sym} 1970 -890 0 0 {name=p26 sig_type=std_logic lab=def}
C {lab_wire.sym} 910 -740 0 0 {name=p17 sig_type=std_logic lab=biasn_cp}
C {lab_wire.sym} 1870 -740 0 0 {name=p20 sig_type=std_logic lab=div_out}
C {lab_wire.sym} 1870 -760 0 0 {name=p21 sig_type=std_logic lab=div_in}
C {lab_wire.sym} 920 -910 0 0 {name=p22 sig_type=std_logic lab=vssa}
C {noconn.sym} 1280 -1160 1 0 {name=l2}
C {noconn.sym} 1300 -1160 1 0 {name=l1}
C {noconn.sym} 1320 -1160 1 0 {name=l3}
C {noconn.sym} 1340 -1160 1 0 {name=l5}
C {noconn.sym} 1870 -760 2 0 {name=l6}
C {noconn.sym} 1870 -740 2 0 {name=l7}
C {noconn.sym} 1860 -940 2 0 {name=l8}
C {noconn.sym} 1860 -960 2 0 {name=l9}
C {noconn.sym} 1860 -980 2 0 {name=l10}
C {capa-2.sym} 1340 -430 0 0 {name=C3
m=1
value=\{Ci_filter\}
footprint=1206
device=polarized_capacitor}
C {res.sym} 1340 -360 0 0 {name=R4
value=\{Rz_filter\}
footprint=1206
device=resistor
m=1}
C {capa-2.sym} 1440 -390 0 0 {name=C4
m=1
value=\{Cj_filter\}
footprint=1206
device=polarized_capacitor}
C {lab_wire.sym} 1420 -320 0 0 {name=p12 sig_type=std_logic lab=vssa}
C {noconn.sym} 1860 -860 2 0 {name=l11}
C {devices/vsource.sym} 810 -710 0 0 {name=V3
value="PULSE(0 3.3 5u 1u 1u 5u 10u)"
savecurrent=false}
C {devices/code_shown.sym} 240 -1170 0 0 {name=Models1 only_toplevel=false
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
.lib $::180MCU_MODELS/sm141064.ngspice cap_mim
.lib $::180MCU_MODELS/sm141064.ngspice res_typical
.lib $::180MCU_MODELS/sm141064.ngspice mimcap_typical
"}
C {devices/code_shown.sym} 195 -268.75 0 0 {name=Simulation only_toplevel=false value="
.save v(tune) v(out) v(reference) v(up) v(down) v(xtop.int_div_out) v(xtop.int_div_in) v(xtop.dff_pfd_ref) v(xtop.dff_pfd_up) v(xtop.up_pre) v(xtop.up_post) v(xtop.down_pre) v(xtop.down_post) v(lock)
.save v(xtop.xpfd.x1.rst) v(xtop.xpfd.x1.net2) v(xtop.xpfd.x1.net3) v(xtop.xpfd.x1.net4) v(xtop.xpfd.x1.net6)
.save v(xtop.xpfd.x1.net5) v(xtop.xpfd.x1.Qb) v(xtop.xpfd.x1.clka) v(xtop.xpfd.x1.clkb)

.control
set filetype=raw
tran 1n 200u
write tb_top_level_sc_20250912.raw
.endc
"}
C {lab_wire.sym} 1460 -560 0 0 {name=p18 sig_type=std_logic lab=vssa}
C {lab_wire.sym} 1460 -1160 0 0 {name=p19 sig_type=std_logic lab=vssa}
C {res.sym} 810 -780 0 0 {name=R1
value=1
footprint=1206
device=resistor
m=1}
C {lab_wire.sym} 1680 -560 0 0 {name=p24 sig_type=std_logic lab=vssa}
C {libs/top_level/top_level_20250919/top_level_20250919_nosc/top_level_20250919_nosc.sym} 1380 -860 0 0 {name=xtop}
